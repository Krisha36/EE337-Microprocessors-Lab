// -- DO NOT CHANGE ANYTHING UNTIL THE ** LINE--//
ORG 0H
LJMP MAIN
ORG 100H
MAIN:
LCALL TAKE_INP
LCALL QUANT_ENC
LCALL LED_DISP
HERE: SJMP HERE
ORG 130H
// *******
DELAY10:
	push 00h
	mov r0, #0C8h
h3: acall delay_50ms
	djnz r0, h3
	pop 00h

RET

DELAY5:
	push 00h
	mov r0, #064h
h4: acall delay_50ms
	djnz r0, h4
	pop 00h

RET

TAKE_INP:
MOV P1, #1FH
ACALL DELAY10
MOV A, P1
CLR C
SUBB A, #10H
SWAP A
MOV R6, A

MOV P1, #2FH
ACALL DELAY10
MOV A, P1
CLR C
SUBB A, #20H
MOV B, R6
ADD A, B 
MOV 60H, A

MOV P1, #3FH
ACALL DELAY10
MOV A, P1
CLR C
SUBB A, #30H
SWAP A
MOV R6, A

MOV P1, #4FH
ACALL DELAY10
MOV A, P1
CLR C
SUBB A, #40H
MOV B, R6
ADD A, B 
MOV 61H, A

MOV P1, #5FH
ACALL DELAY10
MOV A, P1
CLR C
SUBB A, #50H
SWAP A
MOV R6, A

MOV P1, #6FH
ACALL DELAY10
MOV A, P1
CLR C
SUBB A, #60H
MOV B, R6
ADD A, B 
MOV 62H, A

MOV P1, #7FH
ACALL DELAY10
MOV A, P1
CLR C
SUBB A, #70H
SWAP A
MOV R6, A

MOV P1, #8FH
ACALL DELAY10
MOV A, P1
CLR C
SUBB A, #80H
MOV B, R6
ADD A, B 
MOV 63H, A

ANL P1, #0FH
ACALL DELAY5

QUANT_ENC:

// ADD YOUR CODE HERE

MOV R0 , #73H
MOV R1 , #63H
MOV R2 , #4H

COMPARE:
MOV B , @R1
MOV A , #0AH
SUBB A , B
JZ STORE15
JNC STORE5
CLR C
MOV A , #14H
SUBB A , B
JZ STORE25
JNC STORE15
CLR C
MOV A , #1EH
SUBB A , B
JZ STORE35
JNC STORE25
JC STORE35
RET

STORE5:
MOV @R0 , #10H
DEC R1
DEC R0
DJNZ R2 , COMPARE
RET

STORE15:
MOV @R0 , #20H
DEC R1
DEC R0
DJNZ R2 , COMPARE
RET

STORE25:
MOV @R0 , #40H
DEC R1
DEC R0
DJNZ R2 , COMPARE
RET
	
STORE35:
MOV @R0 , #80H
DEC R1
DEC R0
DJNZ R2 , COMPARE
RET

LED_DISP:
MOV P1,70H
ACALL DELAY5
MOV P1,71H
ACALL DELAY5
MOV P1,72H
ACALL DELAY5
MOV P1,73H
ACALL DELAY5

ACALL LED_DISP

RET

delay_50ms:
push 00h
mov r0, #0C8h
h2: acall delay_250us
djnz r0, h2
pop 00h
ret

delay_50ms:
push 00h
mov r0, #0C8h
h2: acall delay_250us
djnz r0, h2
pop 00h
ret

delay_250us:
push 00h
mov r0, #244
h1: djnz r0, h1
pop 00h
ret

END